<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrioControl - Sistema de Gestão</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-left">
            <h1><i class="fas fa-snowflake"></i> FrioControl</h1>
            <p>Sistema completo de gestão para empresas de manutenção de ar-condicionado. Controle de chamados, clientes, técnicos e muito mais.</p>
            
            <div class="demo-accounts">
                <h3><i class="fas fa-key"></i> Modo Demonstração</h3>
                <div class="demo-account" onclick="showDemoInfo()">
                    <strong>Clique para informações de teste</strong><br>
                    <small>O sistema está conectado ao banco de dados real</small>
                </div>
            </div>
        </div>
        <div class="login-right">
            <div class="login-form">
                <h2>Login</h2>
                <div id="loginAlert" class="alert alert-error"></div>
                <div class="form-group">
                    <label for="email">E-mail</label>
                    <input type="email" id="email" class="form-control" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" class="form-control" placeholder="Sua senha">
                </div>
                <button id="loginBtn" class="btn btn-primary btn-block">
                    <span id="loginText">Entrar</span>
                    <div id="loginSpinner" class="spinner hidden"></div>
                </button>
                
                <div class="login-footer">
                    <div class="dev-credit-login">Desenvolvido por</div>
                    <a href="https://devsparkweb.netlify.app/" target="_blank" class="dev-link-login">
                        DevSparkWeb - Soluções em Tecnologia
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="appScreen" class="container hidden">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-snowflake"></i> <span>FrioControl</span></h2>
                <div class="company-info" id="currentCompany">Carregando...</div>
            </div>
            <div class="sidebar-menu">
                <ul>
                    <li class="active" data-tab="dashboard"><a href="#dashboard"><i class="fas fa-home"></i> <span>Dashboard</span></a></li>
                    <li data-tab="tickets"><a href="#tickets"><i class="fas fa-ticket-alt"></i> <span>Chamados</span></a></li>
                    <li data-tab="clients" class="admin-attendant"><a href="#clients"><i class="fas fa-building"></i> <span>Clientes</span></a></li>
                    <li data-tab="users" class="admin-only"><a href="#users"><i class="fas fa-users"></i> <span>Usuários</span></a></li>
                    <li data-tab="companies" class="admin-only"><a href="#companies"><i class="fas fa-building"></i> <span>Empresas</span></a></li>
                    <li data-tab="equipments" class="admin-only"><a href="#equipments"><i class="fas fa-tools"></i> <span>Equipamentos</span></a></li>
                    <li data-tab="finance" class="admin-attendant"><a href="#finance"><i class="fas fa-dollar-sign"></i> <span>Financeiro</span></a></li>
                    <li data-tab="budgets" class="admin-attendant"><a href="#budgets"><i class="fas fa-file-invoice-dollar"></i> <span>Orçamentos</span></a></li>
                    <li data-tab="reports" class="admin-only"><a href="#reports"><i class="fas fa-chart-bar"></i> <span>Relatórios</span></a></li>
                    <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> <span>Sair</span></a></li>
                </ul>
            </div>
            
            <div class="sidebar-footer">
                <div class="dev-credit">Desenvolvido por</div>
                <a href="https://devsparkweb.netlify.app/" target="_blank" class="dev-link">
                    DevSparkWeb - Soluções em Tecnologia
                </a>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <div class="top-bar">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Pesquisar...">
                </div>
                <div class="user-info">
                    <img src="https://i.pravatar.cc/150?img=12" alt="User">
                    <div>
                        <div id="userName">Carregando...</div>
                        <div style="font-size: 0.8rem; color: var(--gray);" id="userRole">Administrador</div>
                    </div>
                </div>
            </div>
            
            <!-- Content -->
            <div class="content">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="page-title">
                        <h1>Dashboard</h1>
                        <div>
                            <button class="btn btn-primary" id="newTicketBtn"><i class="fas fa-plus"></i> Novo Chamado</button>
                            <button class="btn btn-success admin-attendant-btn" id="newBudgetBtn"><i class="fas fa-file-invoice-dollar"></i> Novo Orçamento</button>
                        </div>
                    </div>
                    
                    <!-- Dashboard Cards -->
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Chamados Abertos</div>
                                <div class="card-icon blue">
                                    <i class="fas fa-ticket-alt"></i>
                                </div>
                            </div>
                            <div class="card-value" id="openTickets">0</div>
                            <div class="card-footer">Carregando...</div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">Em Andamento</div>
                                <div class="card-icon orange">
                                    <i class="fas fa-tools"></i>
                                </div>
                            </div>
                            <div class="card-value" id="inProgressTickets">0</div>
                            <div class="card-footer">Carregando...</div>
                        </div>
                        
                        <div class="card admin-attendant-card">
                            <div class="card-header">
                                <div class="card-title">Orçamentos Pendentes</div>
                                <div class="card-icon purple">
                                    <i class="fas fa-file-invoice-dollar"></i>
                                </div>
                            </div>
                            <div class="card-value" id="pendingBudgets">0</div>
                            <div class="card-footer">Carregando...</div>
                        </div>
                        
                        <div class="card admin-attendant-card">
                            <div class="card-header">
                                <div class="card-title">Receita do Mês</div>
                                <div class="card-icon green">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                            </div>
                            <div class="card-value" id="monthlyRevenue">R$ 0</div>
                            <div class="card-footer">Carregando...</div>
                        </div>
                    </div>
                    
                    <!-- Charts and Tables -->
                    <div class="table-container">
                        <div class="section-title">Últimos Chamados</div>
                        <table id="ticketsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Assunto</th>
                                    <th>Técnico</th>
                                    <th>Prioridade</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" style="text-align: center;">Carregando dados do banco...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Tickets Tab -->
                <div id="tickets" class="tab-content">
                    <div class="page-title">
                        <h1>Gerenciar Chamados</h1>
                        <button class="btn btn-primary" id="addTicketBtn"><i class="fas fa-plus"></i> Novo Chamado</button>
                    </div>
                    
                    <div class="table-container">
                        <div class="section-title">Todos os Chamados</div>
                        <table id="allTicketsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Assunto</th>
                                    <th>Técnico</th>
                                    <th>Prioridade</th>
                                    <th>Status</th>
                                    <th>Data</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="8" style="text-align: center;">Carregando dados do banco...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Users Tab -->
                <div id="users" class="tab-content">
                    <div class="page-title">
                        <h1>Gerenciar Usuários</h1>
                        <button class="btn btn-primary" id="addUserBtn"><i class="fas fa-plus"></i> Novo Usuário</button>
                    </div>
                    
                    <div class="table-container">
                        <div class="section-title">Lista de Usuários</div>
                        <table id="usersTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Perfil</th>
                                    <th>Empresa</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" style="text-align: center;">Carregando dados do banco...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Companies Tab -->
                <div id="companies" class="tab-content admin-only">
                    <div class="page-title">
                        <h1>Gerenciar Empresas</h1>
                        <button class="btn btn-primary" id="addCompanyBtn"><i class="fas fa-plus"></i> Nova Empresa</button>
                    </div>
                    
                    <div class="table-container">
                        <div class="section-title">Lista de Empresas</div>
                        <table id="companiesTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>CNPJ</th>
                                    <th>Telefone</th>
                                    <th>Email</th>
                                    <th>Status</th>
                                    <th>Data de Criação</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" style="text-align: center;">Carregando dados do banco...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Other tabs -->
                <div id="clients" class="tab-content">
                    <div class="page-title">
                        <h1>Clientes</h1>
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Novo Cliente</button>
                    </div>
                    <p>Conteúdo da gestão de clientes...</p>
                </div>
                
                <div id="equipments" class="tab-content">
                    <div class="page-title">
                        <h1>Equipamentos</h1>
                        <button class="btn btn-primary"><i class="fas fa-plus"></i> Novo Equipamento</button>
                    </div>
                    <p>Conteúdo da gestão de equipamentos...</p>
                </div>
                
                <div id="finance" class="tab-content">
                    <div class="page-title">
                        <h1>Financeiro</h1>
                        <button class="btn btn-success"><i class="fas fa-plus"></i> Nova Receita</button>
                    </div>
                    <p>Conteúdo do financeiro...</p>
                </div>
                
                <div id="budgets" class="tab-content">
                    <div class="page-title">
                        <h1>Orçamentos</h1>
                        <button class="btn btn-primary" id="addBudgetBtn"><i class="fas fa-plus"></i> Novo Orçamento</button>
                    </div>
                    <p>Conteúdo dos orçamentos...</p>
                </div>
                
                <div id="reports" class="tab-content">
                    <div class="page-title">
                        <h1>Relatórios</h1>
                        <button class="btn btn-primary"><i class="fas fa-download"></i> Exportar Relatório</button>
                    </div>
                    <p>Conteúdo dos relatórios...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Cadastro/Edição de Empresa -->
    <div id="companyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="companyModalTitle">Nova Empresa</h3>
                <button class="close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="companyForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companyName">Nome da Empresa *</label>
                            <input type="text" id="companyName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="companyCnpj">CNPJ</label>
                            <input type="text" id="companyCnpj" class="form-control" placeholder="00.000.000/0000-00">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companyPhone">Telefone</label>
                            <input type="text" id="companyPhone" class="form-control" placeholder="(00) 00000-0000">
                        </div>
                        <div class="form-group">
                            <label for="companyEmail">Email</label>
                            <input type="email" id="companyEmail" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companyAddress">Endereço</label>
                            <input type="text" id="companyAddress" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="companyCity">Cidade</label>
                            <input type="text" id="companyCity" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="companyState">Estado</label>
                            <select id="companyState" class="form-control">
                                <option value="">Selecione</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amapá</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Ceará</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Espírito Santo</option>
                                <option value="GO">Goiás</option>
                                <option value="MA">Maranhão</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Pará</option>
                                <option value="PB">Paraíba</option>
                                <option value="PR">Paraná</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piauí</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rondônia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">São Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="companyStatus">Status</label>
                            <select id="companyStatus" class="form-control">
                                <option value="active">Ativa</option>
                                <option value="inactive">Inativa</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="companyNotes">Observações</label>
                        <textarea id="companyNotes" class="form-control" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelCompanyBtn">Cancelar</button>
                <button class="btn btn-primary" id="saveCompanyBtn">Salvar Empresa</button>
            </div>
        </div>
    </div>

    <!-- Modal para Cadastro/Edição de Usuário -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Novo Usuário</h3>
                <button class="close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userName">Nome Completo *</label>
                            <input type="text" id="userName" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="userEmail">Email *</label>
                            <input type="email" id="userEmail" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userPassword">Senha *</label>
                            <input type="password" id="userPassword" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="userConfirmPassword">Confirmar Senha *</label>
                            <input type="password" id="userConfirmPassword" class="form-control" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userRole">Perfil *</label>
                            <select id="userRole" class="form-control" required>
                                <option value="">Selecione um perfil</option>
                                <option value="admin">Administrador</option>
                                <option value="technician">Técnico</option>
                                <option value="attendant">Atendente</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="userCompany">Empresa *</label>
                            <select id="userCompany" class="form-control" required>
                                <option value="">Selecione uma empresa</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userPhone">Telefone</label>
                            <input type="text" id="userPhone" class="form-control" placeholder="(00) 00000-0000">
                        </div>
                        <div class="form-group">
                            <label for="userStatus">Status</label>
                            <select id="userStatus" class="form-control">
                                <option value="active">Ativo</option>
                                <option value="inactive">Inativo</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelUserBtn">Cancelar</button>
                <button class="btn btn-primary" id="saveUserBtn">Salvar Usuário</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
